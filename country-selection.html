<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Soy.ad - √úlke Se√ßimi</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Outfit', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            padding-bottom: env(safe-area-inset-bottom);
        }
                
        .animated-bg {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 0;
        }
        
        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(60px);
            opacity: 0.4;
            animation: float 20s ease-in-out infinite;
        }
        
        .orb1 {
            width: 500px;
            height: 500px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            top: -200px;
            right: -100px;
            animation-delay: 0s;
        }
        
        .orb2 {
            width: 400px;
            height: 400px;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            bottom: -150px;
            left: -100px;
            animation-delay: 7s;
        }
        
        .orb3 {
            width: 350px;
            height: 350px;
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation-delay: 14s;
        }
        
        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            33% { transform: translate(30px, -30px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
        }
        
        .container {
            background: white;
            border-radius: 32px;
            box-shadow: 0 40px 80px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 500px;
            position: relative;
            z-index: 1;
            animation: slideUp 0.6s ease-out;
            overflow: hidden;
            max-height: calc(90vh - env(safe-area-inset-bottom));
            display: flex;
            flex-direction: column;
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .header p {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .search-container {
            padding: 20px;
            border-bottom: 2px solid #e5e7eb;
        }
        
        .search-input {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #e5e7eb;
            border-radius: 16px;
            font-size: 16px;
            font-family: 'Outfit', sans-serif;
            transition: all 0.3s ease;
            background: #f9fafb;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }
        
        .country-list {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }
        
        .country-item {
            padding: 16px 20px;
            border-radius: 12px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 12px;
            border: 2px solid transparent;
        }
        
        .country-item:hover {
            background: #f5f6fa;
            border-color: #667eea;
            transform: translateX(5px);
        }
        
        .country-item.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
            transform: scale(1.02);
        }
        
        .country-flag {
            font-size: 28px;
            flex-shrink: 0;
        }
        
        .country-name {
            font-size: 16px;
            font-weight: 500;
        }
        
        .continue-btn {
            margin: 20px;
            margin-bottom: calc(50px + env(safe-area-inset-bottom));
            padding: 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 17px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            font-family: 'Outfit', sans-serif;
            letter-spacing: 0.5px;
            flex-shrink: 0;
        }
        
        .continue-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.5);
        }
        
        .continue-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        @media (max-width: 768px) {
            .container {
                max-height: calc(85vh - env(safe-area-inset-bottom));
                margin-bottom: env(safe-area-inset-bottom);
            }
            
            .header h1 {
                font-size: 24px;
            }
            
            .header p {
                font-size: 14px;
            }
            
            .country-item {
                padding: 14px 16px;
            }
            
            .country-flag {
                font-size: 24px;
            }
            
            .country-name {
                font-size: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="animated-bg">
        <div class="orb orb1"></div>
        <div class="orb orb2"></div>
        <div class="orb orb3"></div>
    </div>
    
    <div class="container">
        <div class="header">
            <h1 id="headerTitle">üåç √úlkenizi Se√ßin</h1>
            <p id="headerSubtitle">Hangi √ºlkeden i√ßerik g√∂rmek istersiniz?</p>
        </div>
        
        <div class="search-container">
            <input type="text" id="countrySearch" class="search-input" placeholder="√úlke ara..." oninput="searchCountries()">
        </div>
        
        <div class="country-list" id="countryList"></div>
        
        <button class="continue-btn" id="continueBtn" onclick="saveAndContinue()" disabled>Devam Et</button>
    </div>
    
    <script>
        const API_URL = 'https://soy-ad-backend.onrender.com';
        
        // 50 dil i√ßin √ßeviri sistemi
        const translations = {
            tr: { title: 'üåç √úlkenizi Se√ßin', subtitle: 'Hangi √ºlkeden i√ßerik g√∂rmek istersiniz?', search: '√úlke ara...', continue: 'Devam Et', loading: '√úlkeler y√ºkleniyor...', autoRedirect: 'T√ºrkiye otomatik se√ßildi, y√∂nlendiriliyorsunuz...' },
            en: { title: 'üåç Select Your Country', subtitle: 'Which country would you like to see content from?', search: 'Search country...', continue: 'Continue', loading: 'Loading countries...' },
            de: { title: 'üåç W√§hlen Sie Ihr Land', subtitle: 'Aus welchem Land m√∂chten Sie Inhalte sehen?', search: 'Land suchen...', continue: 'Weiter', loading: 'L√§nder werden geladen...' },
            fr: { title: 'üåç S√©lectionnez votre pays', subtitle: 'De quel pays souhaitez-vous voir du contenu?', search: 'Rechercher un pays...', continue: 'Continuer', loading: 'Chargement des pays...' },
            es: { title: 'üåç Selecciona tu pa√≠s', subtitle: '¬øDe qu√© pa√≠s te gustar√≠a ver contenido?', search: 'Buscar pa√≠s...', continue: 'Continuar', loading: 'Cargando pa√≠ses...' },
            it: { title: 'üåç Seleziona il tuo paese', subtitle: 'Da quale paese vorresti vedere i contenuti?', search: 'Cerca paese...', continue: 'Continua', loading: 'Caricamento paesi...' },
            pt: { title: 'üåç Selecione seu pa√≠s', subtitle: 'De qual pa√≠s voc√™ gostaria de ver conte√∫do?', search: 'Procurar pa√≠s...', continue: 'Continuar', loading: 'Carregando pa√≠ses...' },
            ru: { title: 'üåç –í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ—é —Å—Ç—Ä–∞–Ω—É', subtitle: '–ò–∑ –∫–∞–∫–æ–π —Å—Ç—Ä–∞–Ω—ã –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤–∏–¥–µ—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç?', search: '–ü–æ–∏—Å–∫ —Å—Ç—Ä–∞–Ω—ã...', continue: '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å', loading: '–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω...' },
            ja: { title: 'üåç ÂõΩ„ÇíÈÅ∏Êäû', subtitle: '„Å©„ÅÆÂõΩ„ÅÆ„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíË¶ã„Åü„ÅÑ„Åß„Åô„ÅãÔºü', search: 'ÂõΩ„ÇíÊ§úÁ¥¢...', continue: 'Á∂ö„Åë„Çã', loading: 'ÂõΩ„ÇíË™≠„ÅøËæº„Çì„Åß„ÅÑ„Åæ„Åô...' },
            zh: { title: 'üåç ÈÄâÊã©ÊÇ®ÁöÑÂõΩÂÆ∂', subtitle: 'ÊÇ®ÊÉ≥ÁúãÂì™‰∏™ÂõΩÂÆ∂ÁöÑÂÜÖÂÆπÔºü', search: 'ÊêúÁ¥¢ÂõΩÂÆ∂...', continue: 'ÁªßÁª≠', loading: 'Ê≠£Âú®Âä†ËΩΩÂõΩÂÆ∂...' },
            ar: { title: 'üåç ÿßÿÆÿ™ÿ± ÿØŸàŸÑÿ™ŸÉ', subtitle: 'ŸÖŸÜ ÿ£Ÿä ÿØŸàŸÑÿ© ÿ™ÿ±ŸäÿØ ÿ±ÿ§Ÿäÿ© ÿßŸÑŸÖÿ≠ÿ™ŸàŸâÿü', search: 'ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿØŸàŸÑÿ©...', continue: 'ŸÖÿ™ÿßÿ®ÿπÿ©', loading: 'ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿØŸàŸÑ...' },
            hi: { title: 'üåç ‡§Ö‡§™‡§®‡§æ ‡§¶‡•á‡§∂ ‡§ö‡•Å‡§®‡•á‡§Ç', subtitle: '‡§Ü‡§™ ‡§ï‡§ø‡§∏ ‡§¶‡•á‡§∂ ‡§ï‡•Ä ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä ‡§¶‡•á‡§ñ‡§®‡§æ ‡§ö‡§æ‡§π‡•á‡§Ç‡§ó‡•á?', search: '‡§¶‡•á‡§∂ ‡§ñ‡•ã‡§ú‡•á‡§Ç...', continue: '‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§ñ‡•á‡§Ç', loading: '‡§¶‡•á‡§∂ ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...' },
            ko: { title: 'üåç Íµ≠Í∞Ä ÏÑ†ÌÉù', subtitle: 'Ïñ¥Îäê ÎÇòÎùºÏùò ÏΩòÌÖêÏ∏†Î•º Î≥¥Í≥† Ïã∂ÏúºÏã†Í∞ÄÏöî?', search: 'Íµ≠Í∞Ä Í≤ÄÏÉâ...', continue: 'Í≥ÑÏÜç', loading: 'Íµ≠Í∞ÄÎ•º Î∂àÎü¨Ïò§Îäî Ï§ë...' },
            nl: { title: 'üåç Selecteer uw land', subtitle: 'Uit welk land wilt u content zien?', search: 'Land zoeken...', continue: 'Doorgaan', loading: 'Landen laden...' },
            pl: { title: 'üåç Wybierz sw√≥j kraj', subtitle: 'Z jakiego kraju chcesz widzieƒá tre≈õci?', search: 'Szukaj kraju...', continue: 'Kontynuuj', loading: '≈Åadowanie kraj√≥w...' },
            sv: { title: 'üåç V√§lj ditt land', subtitle: 'Fr√•n vilket land vill du se inneh√•ll?', search: 'S√∂k land...', continue: 'Forts√§tt', loading: 'Laddar l√§nder...' },
            no: { title: 'üåç Velg ditt land', subtitle: 'Fra hvilket land vil du se innhold?', search: 'S√∏k land...', continue: 'Fortsett', loading: 'Laster land...' },
            da: { title: 'üåç V√¶lg dit land', subtitle: 'Fra hvilket land vil du se indhold?', search: 'S√∏g land...', continue: 'Forts√¶t', loading: 'Indl√¶ser lande...' },
            fi: { title: 'üåç Valitse maasi', subtitle: 'Mist√§ maasta haluaisit n√§hd√§ sis√§lt√∂√§?', search: 'Hae maata...', continue: 'Jatka', loading: 'Ladataan maita...' },
            cs: { title: 'üåç Vyberte svou zemi', subtitle: 'Ze kter√© zemƒõ chcete vidƒõt obsah?', search: 'Hledat zemi...', continue: 'Pokraƒçovat', loading: 'Naƒç√≠t√°n√≠ zem√≠...' },
            uk: { title: 'üåç –í–∏–±–µ—Ä—ñ—Ç—å —Å–≤–æ—é –∫—Ä–∞—ó–Ω—É', subtitle: '–ó —è–∫–æ—ó –∫—Ä–∞—ó–Ω–∏ –≤–∏ —Ö–æ—á–µ—Ç–µ –±–∞—á–∏—Ç–∏ –∫–æ–Ω—Ç–µ–Ω—Ç?', search: '–ü–æ—à—É–∫ –∫—Ä–∞—ó–Ω–∏...', continue: '–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏', loading: '–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫—Ä–∞—ó–Ω...' },
            ro: { title: 'üåç Selecta»õi-vƒÉ »õara', subtitle: 'Din ce »õarƒÉ a»õi dori sƒÉ vede»õi con»õinut?', search: 'CƒÉuta»õi »õara...', continue: 'Continua»õi', loading: 'Se √ÆncarcƒÉ »õƒÉrile...' },
            el: { title: 'üåç ŒïœÄŒπŒªŒ≠ŒæœÑŒµ œÑŒ∑ œáœéœÅŒ± œÉŒ±œÇ', subtitle: 'ŒëœÄœå œÄŒøŒπŒ± œáœéœÅŒ± Œ∏Œ≠ŒªŒµœÑŒµ ŒΩŒ± Œ¥ŒµŒØœÑŒµ œÄŒµœÅŒπŒµœáœåŒºŒµŒΩŒø;', search: 'ŒëŒΩŒ±Œ∂ŒÆœÑŒ∑œÉŒ∑ œáœéœÅŒ±œÇ...', continue: 'Œ£œÖŒΩŒ≠œáŒµŒπŒ±', loading: 'Œ¶œåœÅœÑœâœÉŒ∑ œáœâœÅœéŒΩ...' },
            hu: { title: 'üåç V√°laszd ki orsz√°godat', subtitle: 'Melyik orsz√°gb√≥l szeretn√©l tartalmat l√°tni?', search: 'Orsz√°g keres√©se...', continue: 'Folytat√°s', loading: 'Orsz√°gok bet√∂lt√©se...' },
            th: { title: 'üåç ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì', subtitle: '‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏à‡∏≤‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÉ‡∏î?', search: '‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®...', continue: '‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠', loading: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®...' },
            vi: { title: 'üåç Ch·ªçn qu·ªëc gia c·ªßa b·∫°n', subtitle: 'B·∫°n mu·ªën xem n·ªôi dung t·ª´ qu·ªëc gia n√†o?', search: 'T√¨m ki·∫øm qu·ªëc gia...', continue: 'Ti·∫øp t·ª•c', loading: 'ƒêang t·∫£i qu·ªëc gia...' },
            id: { title: 'üåç Pilih negara Anda', subtitle: 'Dari negara mana Anda ingin melihat konten?', search: 'Cari negara...', continue: 'Lanjutkan', loading: 'Memuat negara...' },
            ms: { title: 'üåç Pilih negara anda', subtitle: 'Dari negara mana anda ingin melihat kandungan?', search: 'Cari negara...', continue: 'Teruskan', loading: 'Memuatkan negara...' },
            bn: { title: 'üåç ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¶‡ßá‡¶∂ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®', subtitle: '‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡ßã‡¶® ‡¶¶‡ßá‡¶∂ ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡¶ø‡¶∑‡¶Ø‡¶º‡¶¨‡¶∏‡ßç‡¶§‡ßÅ ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶ö‡¶æ‡¶®?', search: '‡¶¶‡ßá‡¶∂ ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶®‡ßç‡¶ß‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®...', continue: '‡¶ö‡¶æ‡¶≤‡¶ø‡¶Ø‡¶º‡ßá ‡¶Ø‡¶æ‡¶®', loading: '‡¶¶‡ßá‡¶∂ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...' },
            tl: { title: 'üåç Piliin ang iyong bansa', subtitle: 'Mula sa aling bansa mo gustong makita ang nilalaman?', search: 'Maghanap ng bansa...', continue: 'Magpatuloy', loading: 'Naglo-load ng mga bansa...' },
            hr: { title: 'üåç Odaberite svoju zemlju', subtitle: 'Iz koje zemlje ≈æelite vidjeti sadr≈æaj?', search: 'Pretra≈æi zemlju...', continue: 'Nastavi', loading: 'Uƒçitavanje zemalja...' },
            he: { title: 'üåç ◊ë◊ó◊® ◊ê◊™ ◊î◊û◊ì◊ô◊†◊î ◊©◊ú◊ö', subtitle: '◊û◊ê◊ô◊ñ◊ï ◊û◊ì◊ô◊†◊î ◊™◊®◊¶◊î ◊ú◊®◊ê◊ï◊™ ◊™◊ï◊õ◊ü?', search: '◊ó◊§◊© ◊û◊ì◊ô◊†◊î...', continue: '◊î◊û◊©◊ö', loading: '◊ò◊ï◊¢◊ü ◊û◊ì◊ô◊†◊ï◊™...' },
            fa: { title: 'üåç ⁄©ÿ¥Ÿàÿ± ÿÆŸàÿØ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ', subtitle: 'ÿßÿ≤ ⁄©ÿØÿßŸÖ ⁄©ÿ¥Ÿàÿ± ŸÖ€å‚ÄåÿÆŸàÿßŸá€åÿØ ŸÖÿ≠ÿ™Ÿàÿß ÿ®ÿ®€åŸÜ€åÿØ?', search: 'ÿ¨ÿ≥ÿ™ÿ¨Ÿà€å ⁄©ÿ¥Ÿàÿ±...', continue: 'ÿßÿØÿßŸÖŸá', loading: 'ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ⁄©ÿ¥Ÿàÿ±Ÿáÿß...' },
            ca: { title: 'üåç Selecciona el teu pa√≠s', subtitle: 'De quin pa√≠s vols veure contingut?', search: 'Cerca pa√≠s...', continue: 'Continua', loading: 'Carregant pa√Øsos...' },
            sk: { title: 'üåç Vyberte svoju krajinu', subtitle: 'Z ktorej krajiny chcete vidie≈• obsah?', search: 'Hƒæada≈• krajinu...', continue: 'Pokraƒçova≈•', loading: 'Naƒç√≠tavanie kraj√≠n...' },
            ur: { title: 'üåç ÿßŸæŸÜÿß ŸÖŸÑ⁄© ŸÖŸÜÿ™ÿÆÿ® ⁄©ÿ±€å⁄∫', subtitle: 'ÿ¢Ÿæ ⁄©ÿ≥ ŸÖŸÑ⁄© ÿ≥€í ŸÖŸàÿßÿØ ÿØ€å⁄©⁄æŸÜÿß ⁄Üÿß€Å€å⁄∫ ⁄Ø€íÿü', search: 'ŸÖŸÑ⁄© ÿ™ŸÑÿßÿ¥ ⁄©ÿ±€å⁄∫...', continue: 'ÿ¨ÿßÿ±€å ÿ±⁄©⁄æ€å⁄∫', loading: 'ŸÖŸÖÿßŸÑ⁄© ŸÑŸà⁄à €ÅŸà ÿ±€Å€í €Å€å⁄∫...' },
            sr: { title: 'üåç –ò–∑–∞–±–µ—Ä–∏—Ç–µ —Å–≤–æ—ò—É –∑–µ–º—ô—É', subtitle: '–ò–∑ –∫–æ—ò–µ –∑–µ–º—ô–µ –∂–µ–ª–∏—Ç–µ –¥–∞ –≤–∏–¥–∏—Ç–µ —Å–∞–¥—Ä–∂–∞—ò?', search: '–ü—Ä–µ—Ç—Ä–∞–∂–∏ –∑–µ–º—ô—É...', continue: '–ù–∞—Å—Ç–∞–≤–∏', loading: '–£—á–∏—Ç–∞–≤–∞—ö–µ –∑–µ–º–∞—ô–∞...' },
            bg: { title: 'üåç –ò–∑–±–µ—Ä–µ—Ç–µ –≤–∞—à–∞—Ç–∞ —Å—Ç—Ä–∞–Ω–∞', subtitle: '–û—Ç –∫–æ—è —Å—Ç—Ä–∞–Ω–∞ –∏—Å–∫–∞—Ç–µ –¥–∞ –≤–∏–∂–¥–∞—Ç–µ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ?', search: '–¢—ä—Ä—Å–µ–Ω–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∞...', continue: '–ü—Ä–æ–¥—ä–ª–∂–∏', loading: '–ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏...' },
            lt: { title: 'üåç Pasirinkite savo ≈°alƒØ', subtitle: 'I≈° kurios ≈°alies norƒótumƒóte matyti turinƒØ?', search: 'Ie≈°koti ≈°alies...', continue: 'Tƒôsti', loading: 'Kraunamos ≈°alys...' },
            lv: { title: 'üåç Izvƒìlieties savu valsti', subtitle: 'No kuras valsts vƒìlaties redzƒìt saturu?', search: 'Meklƒìt valsti...', continue: 'TurpinƒÅt', loading: 'IelƒÅdƒì valstis...' },
            et: { title: 'üåç Valige oma riik', subtitle: 'Millisest riigist soovite sisu n√§ha?', search: 'Otsi riiki...', continue: 'J√§tka', loading: 'Riikide laadimine...' },
            af: { title: 'üåç Kies jou land', subtitle: 'Uit watter land wil jy inhoud sien?', search: 'Soek land...', continue: 'Gaan voort', loading: 'Laai lande...' },
            az: { title: 'üåç √ñlk…ônizi se√ßin', subtitle: 'Hansƒ± √∂lk…ôd…ôn m…ôzmun g√∂rm…ôk ist…ôrdiniz?', search: '√ñlk…ô axtarƒ±n...', continue: 'Davam et', loading: '√ñlk…ôl…ôr y√ºkl…ônir...' },
            uz: { title: 'üåç Mamlakatingizni tanlang', subtitle: 'Qaysi mamlakatdan tarkib ko\'rmoqchisiz?', search: 'Mamlakatni qidirish...', continue: 'Davom etish', loading: 'Mamlakatlar yuklanmoqda...' },
            kk: { title: 'üåç –ï–ª—ñ“£—ñ–∑–¥—ñ —Ç–∞“£–¥–∞“£—ã–∑', subtitle: '“ö–∞–π –µ–ª–¥–µ–Ω –∫–æ–Ω—Ç–µ–Ω—Ç –∫”©—Ä–≥—ñ“£—ñ–∑ –∫–µ–ª–µ–¥—ñ?', search: '–ï–ª–¥—ñ —ñ–∑–¥–µ—É...', continue: '–ñ–∞–ª“ì–∞—Å—Ç—ã—Ä—É', loading: '–ï–ª–¥–µ—Ä –∂“Ø–∫—Ç–µ–ª—É–¥–µ...' },
            ky: { title: 'üåç ”®–ª–∫”©“£“Ø–∑–¥“Ø —Ç–∞–Ω–¥–∞“£—ã–∑', subtitle: '–ö–∞–π—Å—ã ”©–ª–∫”©–¥”©–Ω –∫–æ–Ω—Ç–µ–Ω—Ç –∫”©—Ä–≥“Ø“£“Ø–∑ –∫–µ–ª–µ—Ç?', search: '”®–ª–∫”©–Ω“Ø –∏–∑–¥”©”©...', continue: '–£–ª–∞–Ω—Ç—É—É', loading: '”®–ª–∫”©–ª”©—Ä –∂“Ø–∫—Ç”©–ª“Ø“Ø–¥”©...' },
            ka: { title: 'üåç ·Éê·Éò·É†·É©·Éò·Éî·Éó ·Éó·É•·Éï·Éî·Éú·Éò ·É•·Éï·Éî·Éß·Éê·Éú·Éê', subtitle: '·É†·Éù·Éõ·Éî·Éö·Éò ·É•·Éï·Éî·Éß·Éú·Éò·Éì·Éê·Éú ·Éí·É°·É£·É†·Éó ·É®·Éò·Éú·Éê·Éê·É†·É°·Éò·É° ·Éú·Éê·ÉÆ·Éï·Éê?', search: '·Éõ·Éù·É´·Éî·Éë·Éú·Éî·Éó ·É•·Éï·Éî·Éß·Éê·Éú·Éê...', continue: '·Éí·Éê·Éí·É†·É´·Éî·Éö·Éî·Éë·Éê', loading: '·Éò·É¢·Éï·Éò·É†·Éó·Éî·Éë·Éê ·É•·Éï·Éî·Éß·Éú·Éî·Éë·Éò...' },
            sw: { title: 'üåç Chagua nchi yako', subtitle: 'Unataka kuona maudhui kutoka nchi gani?', search: 'Tafuta nchi...', continue: 'Endelea', loading: 'Inapakia nchi...' },
            zu: { title: 'üåç Khetha izwe lakho', subtitle: 'Ufuna ukubona okuqukethwe kuliphi izwe?', search: 'Sesha izwe...', continue: 'Qhubeka', loading: 'Ilayisha amazwe...' }
        };
        
        // √áoklu dil arama i√ßin √ºlke isimleri
        const countrySearchTerms = {
            tr: ['t√ºrkiye', 'turkiye', 'turkey', 'turquie', 'turquia', '—Ç—É—Ä—Ü–∏—è', 'tc', 'turchia', '„Éà„É´„Ç≥', 'ÂúüËÄ≥ÂÖ∂'],
            us: ['abd', 'usa', 'amerika', 'america', 'united states', '√©tats-unis', 'estados unidos', '—Å—à–∞', '–∞–º–µ—Ä–∏–∫–∞', '„Ç¢„É°„É™„Ç´', 'ÁæéÂõΩ'],
            fr: ['fransa', 'france', 'francia', 'frankreich', '—Ñ—Ä–∞–Ω—Ü–∏—è', '„Éï„É©„É≥„Çπ', 'Ê≥ïÂõΩ'],
            es: ['ispanya', 'spain', 'espa√±a', 'espagne', 'spanien', '–∏—Å–ø–∞–Ω–∏—è', '„Çπ„Éö„Ç§„É≥', 'Ë•øÁè≠Áâô'],
            it: ['italya', 'italy', 'italia', 'italie', 'italien', '–∏—Ç–∞–ª–∏—è', '„Ç§„Çø„É™„Ç¢', 'ÊÑèÂ§ßÂà©'],
            mx: ['meksika', 'mexico', 'm√©xico', 'mexique', 'mexiko', '–º–µ–∫—Å–∏–∫–∞', '„É°„Ç≠„Ç∑„Ç≥', 'Â¢®Ë•øÂì•'],
            gb: ['ingiltere', 'birle≈üik krallƒ±k', 'uk', 'united kingdom', 'royaume-uni', 'reino unido', '–≤–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è', '–∞–Ω–≥–ª–∏—è', '„Ç§„ÇÆ„É™„Çπ', 'Ëã±ÂõΩ'],
            de: ['almanya', 'germany', 'deutschland', 'allemagne', 'alemania', '–≥–µ—Ä–º–∞–Ω–∏—è', '„Éâ„Ç§„ÉÑ', 'Âæ∑ÂõΩ'],
            gr: ['yunanistan', 'greece', 'gr√®ce', 'grecia', 'griechenland', '–≥—Ä–µ—Ü–∏—è', 'ŒµŒªŒªŒ¨Œ¥Œ±', '„ÇÆ„É™„Ç∑„É£', 'Â∏åËÖä'],
            jp: ['japonya', 'japan', 'japon', 'jap√≥n', '—è–ø–æ–Ω–∏—è', 'Êó•Êú¨', 'nippon'],
            cn: ['√ßin', 'china', 'chine', 'cina', '–∫–∏—Ç–∞–π', '‰∏≠ÂõΩ', 'zhongguo'],
            ru: ['rusya', 'russia', 'russie', 'rusia', 'russland', '—Ä–æ—Å—Å–∏—è', '„É≠„Ç∑„Ç¢', '‰øÑÁΩóÊñØ'],
            kr: ['g√ºney kore', 'south korea', 'cor√©e du sud', 'corea del sur', 's√ºdkorea', '—é–∂–Ω–∞—è –∫–æ—Ä–µ—è', 'ÈüìÂõΩ', 'Èü©ÂõΩ'],
            br: ['brezilya', 'brazil', 'br√©sil', 'brasil', 'brasilien', '–±—Ä–∞–∑–∏–ª–∏—è', '„Éñ„É©„Ç∏„É´', 'Â∑¥Ë•ø'],
            in: ['hindistan', 'india', 'inde', 'indien', '–∏–Ω–¥–∏—è', '„Ç§„É≥„Éâ', 'Âç∞Â∫¶', '‡§≠‡§æ‡§∞‡§§'],
            au: ['avustralya', 'australia', 'australie', '–∞–≤—Å—Ç—Ä–∞–ª–∏—è', '„Ç™„Éº„Çπ„Éà„É©„É™„Ç¢', 'Êæ≥Â§ßÂà©‰∫ö'],
            ca: ['kanada', 'canada', 'canad√°', '–∫–∞–Ω–∞–¥–∞', '„Ç´„Éä„ÉÄ', 'Âä†ÊãøÂ§ß'],
            ar: ['arjantin', 'argentina', 'argentine', 'argentinien', '–∞—Ä–≥–µ–Ω—Ç–∏–Ω–∞', '„Ç¢„É´„Çº„É≥„ÉÅ„É≥', 'ÈòøÊ†πÂª∑']
        };
        
        let countries = [];
        let selectedCountry = null;
        let currentUser = null;
        let currentLang = 'tr';
        let autoRedirecting = false;
        
        // Cihaz dilini tespit et
        function detectLanguage() {
            const browserLang = navigator.language.toLowerCase();
            
            for (const code in translations) {
                if (browserLang.startsWith(code)) {
                    return code;
                }
            }
            
            return 'tr'; // varsayƒ±lan
        }
        
        // Metinleri g√ºncelle
        function updateTexts(lang) {
            if (!translations[lang]) return;
            const t = translations[lang];
            
            document.getElementById('headerTitle').textContent = t.title;
            document.getElementById('headerSubtitle').textContent = t.subtitle;
            document.getElementById('countrySearch').placeholder = t.search;
            document.getElementById('continueBtn').textContent = t.continue;
            document.documentElement.lang = lang;
        }
        
        // √úlke adƒ±nƒ± cihaz diline g√∂re al
        function getCountryName(iso, langCode) {
            try {
                // Intl.DisplayNames API'si otomatik olarak √ºlke adlarƒ±nƒ± √ßevirir
                const displayNames = new Intl.DisplayNames([langCode], { type: 'region' });
                return displayNames.of(iso.toUpperCase());
            } catch (e) {
                // Fallback: ƒ∞ngilizce dene
                try {
                    const displayNames = new Intl.DisplayNames(['en'], { type: 'region' });
                    return displayNames.of(iso.toUpperCase());
                } catch (err) {
                    return iso.toUpperCase();
                }
            }
        }
        
        // Normalize arama metni (aksanlarƒ± kaldƒ±r)
        function normalizeText(text) {
            return text.toLowerCase()
                .replace(/[√ßƒüƒ±√∂≈ü√º]/g, ch => ({ √ß:'c', ƒü:'g', ƒ±:'i', √∂:'o', ≈ü:'s', √º:'u' }[ch] || ch))
                .replace(/[√°√†√§√¢]/g, 'a')
                .replace(/[√©√®√´√™]/g, 'e')
                .replace(/[√≠√¨√Ø√Æ]/g, 'i')
                .replace(/[√≥√≤√∂√¥]/g, 'o')
                .replace(/[√∫√π√º√ª]/g, 'u')
                .replace(/[√±]/g, 'n');
        }
        
        async function loadCountries() {
            try {
                const response = await fetch(`${API_URL}/api/countries`);
                const data = await response.json();
                countries = data.countries;
                renderCountries();
            } catch (error) {
                console.error('Error loading countries:', error);
            }
        }
        
        // Otomatik T√ºrkiye se√ßimi ve devam
        async function autoSelectTurkeyAndContinue() {
            if (autoRedirecting) return;
            autoRedirecting = true;
            
            // T√ºrkiye'yi se√ß
            selectedCountry = 'tr';
            
            // Butonu aktif et ve mesajƒ± g√ºncelle
            const continueBtn = document.getElementById('continueBtn');
            continueBtn.disabled = false;
            continueBtn.textContent = 'T√ºrkiye se√ßildi, y√∂nlendiriliyorsunuz...';
            
            // Direkt kaydet ve devam et
            await saveAndContinue();
        }
        
        function renderCountries(filter = '') {
            const list = document.getElementById('countryList');
            const t = translations[currentLang];
            
            if (!countries || countries.length === 0) {
                list.innerHTML = `<div style="padding: 20px; text-align: center; color: #999;">${t.loading}</div>`;
                return;
            }
            
            let filtered = countries;
            
            if (filter) {
                const normalizedFilter = normalizeText(filter);
                filtered = countries.filter(country => {
                    // Mevcut dildeki √ºlke adƒ±nda ara
                    const currentName = normalizeText(getCountryName(country.code, currentLang));
                    if (currentName.includes(normalizedFilter)) return true;
                    
                    // √áoklu dil alternatiflerinde ara
                    const searchTerms = countrySearchTerms[country.code] || [];
                    return searchTerms.some(term => normalizeText(term).includes(normalizedFilter));
                });
            }
            
            list.innerHTML = filtered.map(country => `
                <div class="country-item ${selectedCountry === country.code ? 'selected' : ''}" 
                     onclick="selectCountry('${country.code}')">
                    <span class="country-flag">${country.flag}</span>
                    <span class="country-name">${getCountryName(country.code, currentLang)}</span>
                </div>
            `).join('');
        }
        
        function searchCountries() {
            const search = document.getElementById('countrySearch').value;
            renderCountries(search);
        }
        
        function selectCountry(countryCode) {
            if (autoRedirecting) return; // Otomatik y√∂nlendirme sƒ±rasƒ±nda manuel se√ßimi engelle
            
            selectedCountry = countryCode;
            renderCountries(document.getElementById('countrySearch').value);
            document.getElementById('continueBtn').disabled = false;
        }
        
        async function saveAndContinue() {
            if (!selectedCountry) return;
            
            const continueBtn = document.getElementById('continueBtn');
            continueBtn.disabled = true;
            continueBtn.textContent = 'Kaydediliyor...';
            
            try {
                const response = await fetch(`${API_URL}/api/user/update-country`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${localStorage.getItem('token')}`
                    },
                    body: JSON.stringify({
                        userId: currentUser.id,
                        country: selectedCountry
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    currentUser.country = selectedCountry;
                    localStorage.setItem('user', JSON.stringify(currentUser));
                    window.location.href = 'app.html';
                } else {
                    throw new Error(data.error || 'Kayƒ±t ba≈üarƒ±sƒ±z');
                }
            } catch (error) {
                console.error('Error saving country:', error);
                alert('Bir hata olu≈ütu. L√ºtfen tekrar deneyin.');
                continueBtn.disabled = false;
                continueBtn.textContent = translations[currentLang].continue;
                autoRedirecting = false;
            }
        }
        
        function checkAuth() {
            const token = localStorage.getItem('token');
            const user = localStorage.getItem('user');
            
            if (!token || !user) {
                window.location.href = 'login.html';
                return;
            }
            
            currentUser = JSON.parse(user);
            
            // Tarayƒ±cƒ± dili T√ºrk√ße ise direkt T√ºrkiye'yi se√ß ve devam et
            if (currentLang === 'tr') {
                document.getElementById('headerSubtitle').textContent = 'T√ºrkiye otomatik se√ßiliyor...';
                setTimeout(() => {
                    autoSelectTurkeyAndContinue();
                }, 100);
            } else {
                // T√ºrk√ße deƒüilse normal √ºlke se√ßim ekranƒ±nƒ± g√∂ster
                if (currentUser.country) {
                    selectedCountry = currentUser.country;
                    document.getElementById('continueBtn').disabled = false;
                }
            }
        }
        
        // Ba≈ülangƒ±√ß
        currentLang = detectLanguage();
        checkAuth();
        updateTexts(currentLang);
        loadCountries();
    </script>
</body>
</html>
